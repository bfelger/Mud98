#!/bin/bash

repo_root="$(cd "$(dirname "${BASH_SOURCE[0]}")/.." && pwd)"
build_cfg="Debug"
bench=""

for arg in "$@" 
do
if [[ ${arg,,} == "release" ]] || [[ ${arg,,} == "rel" ]]
    then
        build_cfg="Release"
    elif [[ ${arg,,} == "debug" ]] || [[ ${arg,,} == "deb" ]]
    then
        build_cfg="Debug"
    elif [[ ${arg,,} == "relwithdebinfo" ]] || [[ ${arg,,} == "relwithdeb" ]] || [[ ${arg,,} == "reldeb" ]]
    then
        build_cfg="RelWithDebInfo"
    elif [[ ${arg,,} == "bench" ]] || [[ ${arg,,} == "benchtest" ]]
    then
        bench="-B"
    elif [[ ${arg,,} == "unittest" ]] || [[ ${arg,,} == "test" ]]
    then
        bench="-U"
    else
        echo "Unknown argument '${arg,,}'."
        exit
    fi
done

"${repo_root}/bin/${build_cfg}/Mud98" --area-dir="${repo_root}/area" --port=4000 $bench
